<h1 class="margin-padding">See all our Assistants</h1>
<div class="container d-flex flex-column">
  <div class="row">
    <div class="col-12">
      <div class="card search-form">
        <div class="card-body p-0">
          <div data-controller="search-assistants">
            <%= form_with url: assistants_path, method: :get, html: {class: "mb-4", data: {search_assistants_target: "form"}} do |f| %>
            <%= f.text_field :query,
                              class: "form-control",
                              placeholder: "Search by skill or availability",
                              value: params[:query],
                              data: {search_assistants_target: "input",
                              action: "keyup->search-assistants#update"} %>
            <%= submit_tag "Search", class: "btn btn-outline-primary" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row gx-4">
  <% @assistants.each do |assistant| %>
    <div class="col-12 col-md-6 col-lg-4">
      <div class="card">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div><%= cl_image_tag assistant.photo.key, class:"avatar-md rounded-circle img-thumbnail", crop: :thumb, gravity: :face %></div>
            <div class="flex-1 ms-3">
              <h3 class="font-size-16 mb-1">
                <%= assistant.firstname %> <%= assistant.lastname %>
              </h3>
            </div>
          </div>
          <div class="mt-3 pt-1">
            <p class="text-muted mb-0"><i class="mdi mdi-phone font-size-15 align-middle pe-2 text-primary"></i> <%= assistant.user.phone %></p>
            <p class="text-muted mb-0 mt-2"><i class="mdi mdi-email font-size-15 align-middle pe-2 text-primary"></i> <%= assistant.user.email %></p>
            <p class="text-muted mb-0 mt-2"><i class="mdi mdi-google-maps font-size-15 align-middle pe-2 text-primary"></i> <%= assistant.availability %></p>
            <p class="text-muted mb-0 mt-2"><i class="mdi mdi-briefcase-plus font-size-15 align-middle pe-2 text-primary"></i> <%= assistant.skills.gsub(/\"/, '').split(",").join(",").gsub('[,', '').gsub(']', '') %> </p>
          </div>
          <div class="d-flex gap-2 pt-4">
            <div class="btn btn-soft-primary btn-sm w-50"><i class="mdi mdi-forum font-size-15 me-1"></i> <%= link_to "Chat", assistant_path(assistant) %></div>
            <%= link_to "Profile", assistant_path(assistant), class:"btn btn-primary btn-sm w-50" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  </div>
  <div class="row g-0 align-items-center pb-4">
    <div class="col-sm-6"></div>
    <div class="col-sm-6">
      <div class="float-sm-end">
        <ul class="pagination mb-sm-0">
          <li class="page-item"><a class="page-link" <%= link_to "<", assistants_path(page: @page - 1) %> </li>
          <li class="page-item"><a class="page-link" <%= link_to "1", assistants_path %> </li>
          <li class="page-item"><a class="page-link" <%= link_to "2", assistants_path(page: 1) %> </li>
          <li class="page-item"><a class="page-link" <%= link_to "3", assistants_path(page: 2) %> </li>
          <li class="page-item"><a class="page-link" <%= link_to ">", assistants_path(page: @page + 1) %> </li>
        </ul>
      </div>
    </div>
  </div>
</div>
