<h1 class="margin-padding">See all ours companies</h1>
<div class="container d-flex flex-column">
  <div class="row">
    <div class="col-12">
      <div class="card search-form">
        <div class="card-body p-0">
          <%= form_with url: companies_path, method: :get, class: "d-flex" do %>
          <%= text_field_tag :query, params[:query], class: "form-control", placeholder: "Find a company" %>
          <%= submit_tag "Search", class: "btn btn-outline-primary" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="container px-4">
    <div class="row align-items-center">
      <div class="col-md-6">
        <div class="mb-3">
          <h5 class="card-title">Companies List <span class="text-muted fw-normal ms-2">[ <%= Company.count.to_s %> ]</span></h5>
        </div>
      </div>
    </div>
  </div>

  <div class="row gx-4">
    <% @companies.each do |company| %>
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card">
          <div class="card-body">
            <div class="d-flex align-items-center">
              <div><%= cl_image_tag company.photo.key, class:"avatar-square-shadow-m", crop: :thumb, gravity: :face %></div>
              <div class="flex-1 ms-3">
                <h3 class="font-size-16 mb-1">
                  <%= company.name %>
                </h3>
                <span class="badge badge-soft-success mb-0">Offers available: <%= Offer.where(company: company).count %></span>
              </div>
            </div>
          <div class="mt-3 pt-1">
            <p class="text-muted mb-0"><i class="mdi mdi-phone font-size-15 align-middle pe-2 text-primary"></i> <%= company.user.phone %></p>
            <p class="text-muted mb-0 mt-2"><i class="mdi mdi-email font-size-15 align-middle pe-2 text-primary"></i> <%= company.user.email %></p>
            <p class="text-muted mb-0 mt-2"><i class="mdi mdi-google-maps font-size-15 align-middle pe-2 text-primary"></i> <%= company.user.address %></p>
          </div>
          <div class="d-flex gap-2 pt-4">
            <div class="w-50"></div>
            <%= link_to "See offers", offers_path, class:"btn btn-primary btn-sm w-50" %>
          </div>
        </div>
      </div>
    </div>
    <% end %>
  </div>
  <div class="row g-0 align-items-center pb-4">
    <div class="col-sm-6">
        <div><p class="mb-sm-0">Showing 1 to 6 of 57 entries</p></div>
    </div>
    <div class="col-sm-6">
      <div class="float-sm-end">
        <ul class="pagination mb-sm-0">
          <li class="page-item"><a class="page-link" <%= link_to "<", companies_path(page: @page - 1) %> </li>
          <li class="page-item"><a class="page-link" <%= link_to "1", companies_path %> </li>
          <li class="page-item"><a class="page-link" <%= link_to "2", companies_path(page: 1) %> </li>
          <li class="page-item"><a class="page-link" <%= link_to "3", companies_path(page: 2) %> </li>
          <li class="page-item"><a class="page-link" <%= link_to ">", companies_path(page: @page + 1) %> </li>
        </ul>
      </div>
    </div>
  </div>
</div>
